<!-- Bouton créer match -->
<div class="flex justify-center mt-10 px-4 sm:px-6 lg:px-0">
  <button type="button" (click)="openModal()"
          class="flex items-center gap-2 px-4 sm:px-5 md:px-6 py-2 sm:py-3 rounded-xl bg-gradient-to-br from-[var(--Rouge-Foncé)] to-[var(--Rouge)]
                 text-[var(--Blanc)] text-sm sm:text-base md:text-lg font-semibold shadow-lg hover:scale-105 hover:shadow-rose-400/40
                 transition-transform duration-200 ease-in-out">
    <i class="fa-solid fa-plus"></i>
    Créer un match
  </button>
</div>

<!-- Modal -->
<div *ngIf="showModal"
     class="fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-black/70 backdrop-blur-sm">
  <div class="w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl rounded-3xl bg-white/95 backdrop-blur-xl shadow-2xl border border-[var(--Rouge)]/20 p-4 sm:p-6">

    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-[var(--Rouge-Foncé)]">Créer un match</h2>
      <button (click)="closeModal()" class="text-[var(--Rouge)] hover:text-[var(--Rouge-Foncé)] text-xl sm:text-2xl">✕</button>
    </div>

    <!-- Prévisualisation équipes -->
    <div class="flex flex-col sm:flex-row gap-4 items-center justify-center mb-6">
      <div class="flex flex-col items-center">
        <img [src]="match.logoA" alt="{{match.equipeA}}" class="h-12 w-12 sm:h-16 sm:w-16 rounded-full shadow-md"/>
        <span class="mt-2 font-medium text-gray-700 text-sm sm:text-base">{{ match.equipeA }}</span>
      </div>
      <div class="text-lg sm:text-xl font-bold text-gray-800 mt-2 sm:mt-0">VS</div>
      <div class="flex flex-col items-center">
        <img *ngIf="match.equipeB" [src]="match.logoB" alt="{{match.equipeB}}" class="h-12 w-12 sm:h-16 sm:w-16 rounded-full shadow-md"/>
        <span class="mt-2 font-medium text-gray-700 text-sm sm:text-base">{{ match.equipeB || 'Sélectionnez une équipe' }}</span>
      </div>
    </div>

    <!-- Formulaire -->
    <form (ngSubmit)="creerMatch()" class="space-y-4">

      <label class="block">
        <span class="text-gray-700 font-medium text-sm sm:text-base">Équipe Adverse</span>
        <select [(ngModel)]="match.equipeB" name="equipeB" required (ngModelChange)="updateLogos()"
                class="mt-1 w-full rounded-xl border border-[var(--Rouge)]/30 px-2 sm:px-3 py-2 shadow-sm focus:ring-2 focus:ring-[var(--Rouge)] focus:outline-none transition text-sm sm:text-base">
          <option value="" disabled selected>-- Choisir une équipe --</option>
          <option *ngFor="let club of equipesAdverses" [value]="club">{{ club }}</option>
        </select>
      </label>

      <label class="block">
        <span class="text-gray-700 font-medium text-sm sm:text-base">Date et heure</span>
        <input [(ngModel)]="match.date" name="date" type="datetime-local" required
               class="mt-1 w-full rounded-xl border border-[var(--Rouge)]/30 px-2 sm:px-3 py-2 shadow-sm focus:ring-2 focus:ring-[var(--Rouge)] focus:outline-none transition text-sm sm:text-base"/>
      </label>

      <label class="block">
        <span class="text-gray-700 font-medium text-sm sm:text-base">Lieu</span>
        <input [(ngModel)]="match.lieu" name="lieu" required
               class="mt-1 w-full rounded-xl border border-[var(--Rouge)]/30 px-2 sm:px-3 py-2 shadow-sm focus:ring-2 focus:ring-[var(--Rouge)] focus:outline-none transition text-sm sm:text-base"/>
      </label>

      <label class="block">
        <span class="text-gray-700 font-medium text-sm sm:text-base">Catégorie</span>
        <select [(ngModel)]="match.categorie" name="categorie" required
                class="mt-1 w-full rounded-xl border border-[var(--Rouge)]/30 px-2 sm:px-3 py-2 shadow-sm focus:ring-2 focus:ring-[var(--Rouge)] focus:outline-none transition text-sm sm:text-base">
          <option value="" disabled selected>-- Sélectionner une catégorie --</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
      </label>

      <p *ngIf="successMsg" class="text-green-600 text-sm sm:text-base">{{ successMsg }}</p>
      <p *ngIf="errorMsg" class="text-red-600 text-sm sm:text-base">{{ errorMsg }}</p>

      <div class="flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 mt-4">
        <button type="button" (click)="closeModal()"
                class="flex items-center justify-center gap-2 px-4 sm:px-5 py-2 sm:py-3 rounded-xl bg-gray-100 text-gray-800 font-semibold shadow hover:bg-gray-200 hover:scale-105 transition-transform duration-200 ease-in-out text-sm sm:text-base">
          Annuler
        </button>
        <button type="submit" [disabled]="loading"
                class="flex items-center justify-center gap-2 px-4 sm:px-5 py-2 sm:py-3 rounded-xl bg-gradient-to-br from-[var(--Rouge-Foncé)] to-[var(--Rouge)] text-[var(--Blanc)] font-semibold shadow hover:scale-105 transition-transform duration-200 ease-in-out text-sm sm:text-base">
          <i class="fa-solid fa-check"></i>
          {{ loading ? 'Création...' : 'Créer le match' }}
        </button>
      </div>
    </form>
  </div>
</div>
