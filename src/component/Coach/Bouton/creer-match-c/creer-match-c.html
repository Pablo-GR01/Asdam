<!-- Bouton créer match -->
<div class="flex justify-center mt-12 px-4 sm:px-6 lg:px-0">
  <button
    type="button"
    (click)="openModal()"
    class="group flex items-center gap-3 px-5 sm:px-6 py-3 rounded-2xl
           bg-gradient-to-br from-[var(--Rouge-Foncé)] to-[var(--Rouge)]
           text-white text-sm sm:text-base font-semibold shadow-lg
           hover:shadow-rose-400/40 hover:scale-105
           focus:outline-none focus:ring-4 focus:ring-rose-300/60
           transition-all duration-300 ease-out"
    aria-label="Créer un nouveau match"
  >
    <i class="fa-solid fa-plus transition-transform duration-300 group-hover:rotate-90"></i>
    Créer un match
  </button>
</div>

<!-- Modal -->
<div
  *ngIf="showModal"
  class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm"
  role="dialog"
  aria-modal="true"
  [attr.aria-labelledby]="'modal-title'"
>
  <div
    class="w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl
           rounded-3xl bg-white/95 backdrop-blur-xl shadow-2xl border border-[var(--Rouge)]/20
           p-6 sm:p-8 animate-fade-in-up"
  >
    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
      <h2 id="modal-title" class="text-xl sm:text-2xl font-bold text-[var(--Rouge-Foncé)]">
        Créer un match
      </h2>
      <button
        (click)="closeModal()"
        class="text-[var(--Rouge)] hover:text-[var(--Rouge-Foncé)] text-2xl
               focus:outline-none focus:ring-2 focus:ring-rose-400 rounded-full p-1"
        aria-label="Fermer la fenêtre"
      >
        ✕
      </button>
    </div>

    <!-- Prévisualisation équipes -->
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-8">
      <div class="flex flex-col items-center">
        <img
          [src]="match.logoA"
          [alt]="match.equipeA"
          class="h-14 w-14 sm:h-16 sm:w-16 rounded-full shadow-md"
        />
        <span class="mt-2 font-medium text-gray-800 text-sm sm:text-base">{{ match.equipeA }}</span>
      </div>
      <div class="text-lg sm:text-xl font-bold text-gray-700">VS</div>
      <div class="flex flex-col items-center">
        <img
          *ngIf="match.equipeB"
          [src]="match.logoB"
          [alt]="match.equipeB"
          class="h-14 w-14 sm:h-16 sm:w-16 rounded-full shadow-md"
        />
        <span class="mt-2 font-medium text-gray-600 text-sm sm:text-base">
          {{ match.equipeB || 'Sélectionnez une équipe' }}
        </span>
      </div>
    </div>

    <!-- Formulaire -->
    <form (ngSubmit)="creerMatch()" class="space-y-5">
      <label class="block">
        <span class="text-gray-700 font-medium text-sm sm:text-base">Équipe Adverse</span>
        <select
          [(ngModel)]="match.equipeB"
          name="equipeB"
          required
          (ngModelChange)="updateLogos()"
          class="mt-1 w-full rounded-xl border border-[var(--Rouge)]/30
                 px-3 py-2 shadow-sm focus:ring-2 focus:ring-[var(--Rouge)] focus:outline-none
                 transition text-sm sm:text-base"
        >
          <option value="" disabled selected>-- Choisir une équipe --</option>
          <option *ngFor="let club of equipesAdverses" [value]="club">{{ club }}</option>
        </select>
      </label>

      <label class="block">
        <span class="text-gray-700 font-medium text-sm sm:text-base">Date et heure</span>
        <input
          [(ngModel)]="match.date"
          name="date"
          type="datetime-local"
          required
          class="mt-1 w-full rounded-xl border border-[var(--Rouge)]/30
                 px-3 py-2 shadow-sm focus:ring-2 focus:ring-[var(--Rouge)] focus:outline-none
                 transition text-sm sm:text-base"
        />
      </label>

      <label class="block">
        <span class="text-gray-700 font-medium text-sm sm:text-base">Lieu</span>
        <input
          [(ngModel)]="match.lieu"
          name="lieu"
          required
          class="mt-1 w-full rounded-xl border border-[var(--Rouge)]/30
                 px-3 py-2 shadow-sm focus:ring-2 focus:ring-[var(--Rouge)] focus:outline-none
                 transition text-sm sm:text-base"
        />
      </label>

      <label class="block">
        <span class="text-gray-700 font-medium text-sm sm:text-base">Catégorie</span>
        <select
          [(ngModel)]="match.categorie"
          name="categorie"
          required
          class="mt-1 w-full rounded-xl border border-[var(--Rouge)]/30
                 px-3 py-2 shadow-sm focus:ring-2 focus:ring-[var(--Rouge)] focus:outline-none
                 transition text-sm sm:text-base"
        >
          <option value="" disabled selected>-- Sélectionner une catégorie --</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
      </label>

      <!-- Messages -->
      <div *ngIf="successMsg" class="text-green-700 bg-green-50 border border-green-200 rounded-lg px-4 py-2 text-sm sm:text-base">
        {{ successMsg }}
      </div>
      <div *ngIf="errorMsg" class="text-red-700 bg-red-50 border border-red-200 rounded-lg px-4 py-2 text-sm sm:text-base">
        {{ errorMsg }}
      </div>

      <!-- Actions -->
      <div class="flex flex-col sm:flex-row justify-end gap-3 mt-6">
        <button
          type="button"
          (click)="closeModal()"
          class="px-5 py-2.5 rounded-xl bg-gray-100 text-gray-800 font-semibold
                 hover:bg-gray-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-300
                 transition-all duration-200 ease-in-out text-sm sm:text-base"
        >
          Annuler
        </button>
        <button
          type="submit"
          [disabled]="loading"
          class="px-5 py-2.5 rounded-xl bg-gradient-to-br from-[var(--Rouge-Foncé)] to-[var(--Rouge)]
                 text-white font-semibold shadow hover:scale-105
                 focus:outline-none focus:ring-2 focus:ring-rose-400
                 transition-all duration-200 ease-in-out text-sm sm:text-base
                 disabled:opacity-60 disabled:cursor-not-allowed"
        >
          <i class="fa-solid fa-check mr-2"></i>
          {{ loading ? 'Création...' : 'Créer le match' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Animation CSS -->
<style>
  @keyframes fade-in-up {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.3s ease-out;
  }
</style>