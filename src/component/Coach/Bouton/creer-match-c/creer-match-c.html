<!-- Bouton pour ouvrir la modal -->
<div class="flex justify-center mt-10">
  <button type="button" (click)="openModal()"
          class="group inline-flex items-center gap-3 px-7 py-3.5
                 bg-gradient-to-r from-[var(--Rouge)] to-[var(--Rouge-Clair)]
                 text-white rounded-2xl shadow-lg hover:scale-105 hover:shadow-rose-400/40
                 focus:outline-none focus-visible:ring-4 focus-visible:ring-rose-300
                 transition-all duration-300">
    Créer un match
  </button>
</div>

<!-- Modal -->
<div *ngIf="showModal"
     class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm">
  <div class="w-full max-w-lg rounded-2xl bg-white shadow-2xl border border-gray-100 p-6">

    <!-- Header -->
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-bold text-gray-900">Créer un match</h2>
      <button (click)="closeModal()" class="text-gray-400 hover:text-red-500">✕</button>
    </div>

    <!-- Prévisualisation des équipes -->
    <div class="flex gap-4 items-center justify-center mb-4">
      <div class="flex flex-col items-center">
        <img [src]="match.logoA" alt="{{match.equipeA}}" class="h-16 w-16 rounded-full"/>
        <span>{{ match.equipeA }}</span>
      </div>
      <div class="text-xl font-bold">VS</div>
      <div class="flex flex-col items-center">
        <img *ngIf="match.equipeB" [src]="match.logoB" alt="{{match.equipeB}}" class="h-16 w-16 rounded-full"/>
        <span>{{ match.equipeB || 'Sélectionnez une équipe' }}</span>
      </div>
    </div>

    <!-- Formulaire -->
    <form (ngSubmit)="creerMatch()" class="space-y-4">
      <!-- Équipe B : menu déroulant -->
      <label class="block">
        <span class="text-gray-700 font-medium">Équipe Adverse</span>
        <select [(ngModel)]="match.equipeB" name="equipeB" required
                (ngModelChange)="updateLogos()"
                class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2">
          <option value="" disabled selected>-- Choisir une équipe --</option>
          <option *ngFor="let club of equipesAdverses" [value]="club">{{ club }}</option>
        </select>
      </label>

      <!-- Date -->
      <label class="block">
        <span class="text-gray-700 font-medium">Date et heure</span>
        <input [(ngModel)]="match.date" name="date" type="datetime-local" required
               class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2"/>
      </label>

      <!-- Lieu -->
      <label class="block">
        <span class="text-gray-700 font-medium">Lieu</span>
        <input [(ngModel)]="match.lieu" name="lieu" required
               class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2"/>
      </label>

      <!-- Catégorie -->
      <label class="block">
        <span class="text-gray-700 font-medium">Catégorie</span>
        <select [(ngModel)]="match.categorie" name="categorie" required
                class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2">
          <option value="" disabled selected>-- Sélectionner une catégorie --</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
      </label>

      <!-- Messages -->
      <p *ngIf="successMsg" class="text-green-600">{{ successMsg }}</p>
      <p *ngIf="errorMsg" class="text-red-600">{{ errorMsg }}</p>

      <!-- Boutons -->
      <div class="flex justify-end gap-3 mt-4">
        <button type="button" (click)="closeModal()" class="px-4 py-2 rounded-lg border">Annuler</button>
        <button type="submit" [disabled]="loading" class="px-4 py-2 rounded-lg bg-indigo-600 text-white">
          {{ loading ? 'Création...' : 'Créer le match' }}
        </button>
      </div>
    </form>
  </div>
</div>
