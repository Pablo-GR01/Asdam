<!-- Toast -->
<div *ngIf="toast" role="alert" aria-live="polite"
     class="fixed top-4 right-4 z-50 px-4 py-2 rounded-xl shadow-lg text-white text-sm font-medium animate-fade-in-up"
     [ngClass]="{
       'bg-green-500': toast.type === 'success',
       'bg-red-500': toast.type === 'error'
     }">
  {{ toast.message }}
</div>

<!-- Loader -->
<div *ngIf="loading" class="flex justify-center items-center h-screen bg-[var(--Black)]">
  <div class="text-lg font-semibold text-white animate-pulse">Chargement...</div>
</div>

<!-- Dashboard -->
<div *ngIf="!loading && user" class="-mt-15 h-[953px] flex items-center justify-center bg-cover bg-center relative"
     style="background-image: url('/assets/i1.jpg')">

  <!-- Overlay sombre + flou -->
  <div class="absolute inset-0 bg-[var(--Black)]/70 backdrop-blur-lg"></div>

  <!-- Conteneur principal -->
  <div class="w-full max-w-3xl relative z-10 p-6 space-y-6">

    <!-- Profil -->
    <div class="bg-[var(--Gris)]/10 backdrop-blur-2xl rounded-2xl shadow-2xl border border-[var(--Rouge)]/20 p-6 flex flex-col md:flex-row items-center gap-6 animate-fade-in-up">
      <div class="w-24 h-24 rounded-full bg-gradient-to-br from-[var(--Rouge)] to-[var(--Rouge-Foncé)] text-white flex items-center justify-center text-3xl font-bold">
        {{ user.initiale }}
      </div>
      <div class="text-center md:text-left">
        <h2 class="text-2xl md:text-3xl font-bold text-white">Bonjour, {{ user.prenom }} {{ user.nom }}</h2>
        <p class="text-[var(--Blanc)]/70">{{ user.role || 'Coach' }}</p>
      </div>
    </div>

    <!-- Accès rapide -->
    <div class="bg-[var(--Gris)]/10 backdrop-blur-2xl rounded-2xl shadow-2xl border border-[var(--Rouge)]/20 p-6 animate-fade-in-up">
      <h3 class="text-lg font-semibold text-white mb-4">Accès rapide</h3>
      <div class="flex flex-wrap gap-4">
        <app-creer-match-c></app-creer-match-c>
        <app-creer-convocations-c></app-creer-convocations-c>
        <app-creer-post-c></app-creer-post-c>
      </div>
    </div>
  </div>
</div>

<!-- Non connecté -->
<div *ngIf="!loading && !user" class="h-screen flex flex-col items-center justify-center bg-[var(--Black)]">
  <p class="text-white/70 mb-6">Aucun utilisateur connecté.</p>
  <button (click)="router.navigate(['/connexion'])" 
          class="bg-gradient-to-r from-[var(--Rouge-Foncé)] to-[var(--Rouge)] text-white py-3 px-8 rounded-xl shadow-lg hover:scale-105 transform transition duration-300">
    Se connecter
  </button>
</div>

<style>
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }

  @keyframes fade-in-up {
    0% { opacity: 0; transform: translateY(20px) scale(0.95); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }
</style>
