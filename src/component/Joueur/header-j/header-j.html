<app-icon></app-icon>

<!-- ================= HEADER ================= -->
<header class="sticky top-0 z-50 bg-white/90 backdrop-blur border-b-2 border-red-400 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 py-3 flex items-center justify-between">

    <!-- LOGO -->
    <a href="/" class="flex items-center gap-3 group">
      <img src="assets/LOGO.png" alt="TeamAsdam" class="w-10 h-10 sm:w-12 sm:h-12 object-contain group-hover:scale-105 transition">
      <h1 class="text-xl sm:text-2xl font-extrabold text-[#3a0d0e] hover:text-[#b94e4e]">Team<span class="text-red-500 tracking-wide hover:text-red-600">Asdam</span></h1>
    </a>

    <!-- NAVIGATION DESKTOP -->
    <nav class="hidden md:flex items-center gap-2">
      <!-- ACTUALITÉ -->
      <div class="relative" (clickOutside)="closeDropdown('actusMenu')">
        <button (click)="toggleDropdown('actusMenu', $event)" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-50 text-gray-800 hover:text-red-600 transition">
          <i class="fas fa-newspaper"></i><span>Actualité</span>
          <i class="fas fa-chevron-down text-xs transition-transform" [class.rotate-180]="activeDropdown==='actusMenu'"></i>
        </button>
        <div id="actusMenu" [class.hidden]="activeDropdown!=='actusMenu'" class="absolute left-0 mt-2 w-44 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
          <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-red-500 hover:text-white transition"><i class="fas fa-bullhorn"></i>Dernières news</a>
          <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-red-500 hover:text-white transition"><i class="fas fa-file-alt"></i>Communiqués</a>
        </div>
      </div>

      <!-- MATCH -->
      <div class="relative" (clickOutside)="closeDropdown('matchMenu')">
        <button (click)="toggleDropdown('matchMenu', $event)" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-50 text-gray-800 hover:text-red-600 transition">
          <i class="fas fa-futbol"></i><span>Match</span>
          <i class="fas fa-chevron-down text-xs transition-transform" [class.rotate-180]="activeDropdown==='matchMenu'"></i>
        </button>
        <div id="matchMenu" [class.hidden]="activeDropdown!=='matchMenu'" class="absolute left-0 mt-2 w-44 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
          <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-red-500 hover:text-white transition"><i class="fas fa-users"></i>Convocations</a>
          <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-red-500 hover:text-white transition"><i class="fas fa-trophy"></i>Résultats</a>
        </div>
      </div>

      <!-- PLANNING -->
      <div class="relative" (clickOutside)="closeDropdown('planningMenu')">
        <button (click)="toggleDropdown('planningMenu', $event)" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-50 text-gray-800 hover:text-red-600 transition">
          <i class="fas fa-calendar-alt"></i><span>Planning</span>
          <i class="fas fa-chevron-down text-xs transition-transform" [class.rotate-180]="activeDropdown==='planningMenu'"></i>
        </button>
        <div id="planningMenu" [class.hidden]="activeDropdown!=='planningMenu'" class="absolute left-0 mt-2 w-44 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
          <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-red-500 hover:text-white transition"><i class="fas fa-dumbbell"></i>Entraînements</a>
          <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-red-500 hover:text-white transition"><i class="fas fa-calendar-check"></i>Événements</a>
        </div>
      </div>

      <!-- NOTIFICATIONS -->
      <div class="relative" (clickOutside)="closeDropdown('notifMenu')">
        <button (click)="toggleDropdown('notifMenu', $event)" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-50 text-gray-800 hover:text-red-600 transition">
          <i class="fas fa-bell"></i><span>Notif</span>
          <span *ngIf="notifCount>0" class="ml-1 bg-red-500 text-white text-[10px] px-1.5 rounded-full">{{notifCount}}</span>
          <i class="fas fa-chevron-down text-xs transition-transform" [class.rotate-180]="activeDropdown==='notifMenu'"></i>
        </button>
        <div id="notifMenu" [class.hidden]="activeDropdown!=='notifMenu'" class="absolute left-0 mt-2 w-44 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
          <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-red-500 hover:text-white transition">
            <i class="fas fa-envelope"></i><span class="flex-1">Messages</span>
            <span *ngIf="messageCount>0" class="bg-red-500 text-white text-[10px] px-1.5 rounded-full">{{messageCount}}</span>
          </a>
          <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-red-500 hover:text-white transition"><i class="fas fa-exclamation-circle"></i>Alertes</a>
        </div>
      </div>
    </nav>

    <!-- BURGER -->
    <button (click)="mobileMenuOpen=!mobileMenuOpen" class="md:hidden text-red-500 hover:text-red-600 text-2xl p-2" aria-label="Menu">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <!-- MENU MOBILE -->
  <div *ngIf="mobileMenuOpen" class="md:hidden bg-white/90 border-t border-red-200/40 px-4 py-3 space-y-2">
    <details class="group">
      <summary class="flex items-center gap-3 cursor-pointer hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition"><i class="fas fa-newspaper"></i>Actualité</summary>
      <div class="pl-8 mt-1 space-y-1">
        <a href="#" class="block py-1 hover:text-red-600">Dernières news</a>
        <a href="#" class="block py-1 hover:text-red-600">Communiqués</a>
      </div>
    </details>

    <details class="group">
      <summary class="flex items-center gap-3 cursor-pointer hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition"><i class="fas fa-futbol"></i>Match</summary>
      <div class="pl-8 mt-1 space-y-1">
        <a href="#" class="block py-1 hover:text-red-600">Convocations</a>
        <a href="#" class="block py-1 hover:text-red-600">Résultats</a>
      </div>
    </details>

    <details class="group">
      <summary class="flex items-center gap-3 cursor-pointer hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition"><i class="fas fa-calendar-alt"></i>Planning</summary>
      <div class="pl-8 mt-1 space-y-1">
        <a href="#" class="block py-1 hover:text-red-600">Entraînements</a>
        <a href="#" class="block py-1 hover:text-red-600">Événements</a>
      </div>
    </details>

    <details class="group">
      <summary class="flex items-center gap-3 cursor-pointer hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition">
        <i class="fas fa-bell"></i>Notif
        <span *ngIf="notifCount>0" class="ml-auto bg-red-500 text-white text-xs px-1.5 rounded-full">{{notifCount}}</span>
      </summary>
      <div class="pl-8 mt-1 space-y-1">
        <a href="#" class="flex items-center gap-2 py-1 hover:text-red-600">
          <span class="flex-1">Messages</span>
          <span *ngIf="messageCount>0" class="bg-red-500 text-white text-xs px-1.5 rounded-full">{{messageCount}}</span>
        </a>
        <a href="#" class="block py-1 hover:text-red-600">Alertes</a>
      </div>
    </details>
  </div>
</header>