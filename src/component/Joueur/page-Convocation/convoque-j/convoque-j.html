<!-- ==========  CONVOCATIONS – UI « PRO » CENTRÉ  ========== -->
<section
  class="relative isolate flex min-h-screen items-center justify-center bg-white text-gray-900 overflow-hidden"
  aria-labelledby="convoc-title"
>
  <div class="w-full max-w-6xl px-4 sm:px-6 lg:px-8 py-12 lg:py-20">

    <!-- =====  EN-TÊTE  ===== -->
    <header
      *ngIf="!loading && userInConvocations.length > 0"
      class="mx-auto max-w-3xl text-center mb-10 lg:mb-16 px-4 sm:px-0"
    >
      <p class="text-xs uppercase tracking-[0.3em] text-gray-500">Convocation officielle</p>

      <h1
        id="convoc-title"
        class="mt-3 font-extrabold text-3xl sm:text-4xl md:text-5xl lg:text-6xl
               bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-700"
      >
        Liste des joueurs
      </h1>

      <p class="mt-4 text-sm sm:text-base md:text-lg text-gray-600">
        {{ userInConvocations[0]?.date | date:'fullDate':'':'fr' }} – {{ userInConvocations[0]?.lieu }}
      </p>

      <p class="mt-2 text-lg sm:text-xl md:text-2xl font-bold text-rose-600 tracking-wide">
        {{ userInConvocations[0]?.match }}
      </p>
    </header>

    <!-- =====  LOADER  ===== -->
    <div
      *ngIf="loading"
      class="flex flex-col items-center gap-4 text-gray-500"
      aria-busy="true"
      [attr.aria-label]="'Chargement des convocations'"
    >
      <span class="w-8 h-8 border-2 border-gray-300 border-t-rose-600 rounded-full animate-spin"></span>
      <span class="text-sm sm:text-base">Chargement des convocations…</span>
    </div>

    <!-- =====  GRILLE DES CONVOCATIONS  ===== -->
    <ul
      *ngIf="!loading && userInConvocations.length > 0"
      role="list"
      class="grid gap-5 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 px-2 sm:px-0"
    >
      <li
        *ngFor="let c of userInConvocations; index as i"
        class="group relative bg-gray-50 rounded-2xl p-4 sm:p-5 border border-gray-200
               hover:border-rose-600 hover:-translate-y-1 hover:shadow-2xl hover:shadow-rose-600/20
               transition-all duration-300"
      >
        <!-- Liste des joueurs -->
        <ul role="list" class="mt-4 space-y-2">
          <li
            *ngFor="let joueur of c.joueurs; index as j"
            role="listitem"
            class="flex items-center gap-3 px-2 sm:px-3 py-1 rounded"
            [ngClass]="{
              'bg-amber-100 font-semibold ring-2 ring-amber-300':
                userConnecte &&
                joueur.nom === userConnecte.nom &&
                joueur.prenom === userConnecte.prenom
            }"
          >
            <!-- Numéro du joueur -->
            <span class="w-6 text-center font-semibold text-gray-500 text-sm sm:text-base">{{ j + 1 }}</span>

            <!-- Avatar initiales -->
            <div
              class="w-8 h-8 flex items-center justify-center rounded-full bg-rose-600 text-white font-bold text-xs sm:text-sm"
              aria-hidden="true"
            >
              {{ (joueur.prenom?.charAt(0) || '') + (joueur.nom?.charAt(0) || '') | uppercase }}
            </div>

            <!-- Nom complet -->
            <span class="text-gray-900 text-sm sm:text-base">{{ joueur.prenom }} {{ joueur.nom }}</span>
          </li>
        </ul>
      </li>
    </ul>

    <!-- =====  ÉTAT VIDE POUR UTILISATEUR NON CONVOQUÉ ===== -->
    <div
      *ngIf="!loading && userInConvocations.length === 0"
      class="text-center py-24 px-4 sm:px-0"
      role="status"
      aria-live="polite"
    >
      <p class="text-gray-400 text-base sm:text-lg">Aucune convocation pour le moment.</p>
    </div>

    <!-- =====  MESSAGE D’ERREUR  ===== -->
    <div
      *ngIf="error"
      class="text-center py-24 px-4 sm:px-0 text-rose-600"
      role="alert"
      aria-live="assertive"
    >
      <p class="text-base sm:text-lg">{{ error }}</p>
    </div>

  </div>
</section>
